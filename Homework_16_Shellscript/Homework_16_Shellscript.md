```sh
--shell script start--

#!/bin/bash

Q="$@"

URL='https://www.ya.ru/search?tbs=li:1&q='

AGENT="Mozilla/4.0"

stream=$(curl -A "$AGENT" -skLm 10 "${URL}${Q//\ /+}" | grep -oP '\/url\?q=.+?&amp' | sed 's|/url?q=||; s|&amp||')

echo -e "${stream//\%/\x}"

--shell script end--
```
___


+ ***Первая строка***, это указание на фактическое местоположение интерпритатора, чтобы при запуске скрипта не требовалось указывать отдельно интерпретатор. 

+ ***Вторая строка***, переменной `Q` присваивается значение в виде встроеной команды bash, то есть все параметры переданные через командную строку будут служить аргументом для переменной и передаются скрипту. И это все заключено в двойные квоты, таким образом почти все специальные символы в кавычках не будут интерпритироватся кроме знаков `$`, ` `` `, `\`. В то время как сингл квоты запрещают интерпритацию всех специальных символов.

+ ***Третья строка***. Передается URL адрес страницы в качестве аргумента для переменной `URL` c запретом интерпритации всех спецсимволов.

+ ***Четвертая строка***. Тут задается пользовательский агент в качестве аргумента к переменной. Это любое програмное обеспечение, действующее от имени пользователя, которое длает запрос к серверу и получает ответ и обрабатывает его.

+ ***Пятая строка***. 
   - Тут в качестве аргумента переменной будет подстановка команд. Принцип `$()` похож на бэктикс, отличие - эта форма допускает вложеность.
С помощью команды `curl` передается URL, опция `-A` указывает какой агент будет отправлять HTTP запросы на сервер, в моейм случае он передается с переменной. Опция `-c` говорит о том, что нужно курл замьютить и не показывать никих сообщений о его работе. Опция `-k`, это что есть разрешение выполнить небезопасные SSL-соединения без соответсвующих сертификатов. Опция `-L` говорит о том, что если сервер сообщает что страница перенсена в другое место (обозначается заголовком location и кодом ответа 3хх) курл должен обязательно повторить запрос на новом месте. Опция `-m 10`  - это маскимальное количество секунд для передачи данных. Дальше идет вывод переменной `$(URL)`, а потом реплейсмент патерн (каждое вхождение пробела будет заменено `+` с аргумента который будет передаватся с переменной `Q`).

    - Дальше идет пайплайн `|` передает стдаут предыдущей команды на стдин следующей команды Статус возврата контейнера - это выход из последней команды.

    - Команда `grep` говорит что нужно печать строки соответствующие шаблону, `-oP` этот параметр указывает команде grep печатать только совпадающие слова, а не всю строку, а также интерпритировать шаблон как регулярное выражение `Perl`, это как специальная текстовая строка для описания шаблона поиска в заданном тексте. Сам шаблон начинается с `\` экранирует следующий символ `/`, чтобы `grep` эго интерпритировал и искал как обычный символ. Потом идет `url` и `?`(экранирован с помощью `/`)  и `q=`. `.+?&amp` соответсвие одному символу любого значения, соответсвует одному или нескольким вхождениям предшествующего выражения, соответсвует нулю или  вхождениям предшествующего выражения и потом закрывает это все `&amp`.
    
    - Дальше идет пайплайн `|` передает стдаут предыдущей команды на стдин следующей команды
    
    - `sed` используется чтобы взять взять значения со стандартного ввода с пайплайна и сделать замену и вывод согласно определенного шаблона. Дальше все вхождения `/url?q=` и `&amp` будут удалены об этом нам говорит конструкция `s|...||`

+ ***Шестая строка***. Команда `echo` вывдет и отобразит нам текст с опцией `-e` включающей интерпретацию экранирования обратной косой черты. Берет переменную    `stream` и выводит нам что у нас получилось после тех трех команд меняя `%` на `х`. Опять же аргумент команды стоит в двойных кавычках чтобы специальные символы не интерпритировались bash кроме `$`


___

#### ***<mark style="background-color: #00BFFF">Полезные ссылки для меня:</mark>***

*1. https://www.digitalocean.com/community/tutorials/using-grep-regular-expressions-to-search-for-text-patterns-in-linux*

*2. https://www.ibm.com/docs/en/i/7.1?topic=data-grep*

*3. https://sed.js.org*

*4. http://www.dba-oracle.com/t_linux_single_double_quotes.htm*
